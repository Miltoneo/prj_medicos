{% extends "templates/template_cenario_2.html" %}
{% load render_table from django_tables2 %}

{% block bl_script %}
<script>
document.addEventListener('DOMContentLoaded', function() {
  const form = document.querySelector('form[enctype="multipart/form-data"]');
  if (form) {
    form.addEventListener('submit', function(e) {
      const fileInput = document.getElementById('file');
      if (!fileInput.value) {
        alert('Selecione um arquivo XML antes de importar.');
        e.preventDefault();
      }
    });
  }
});
</script>
{% endblock %}

{% block title %}

{% endblock %}

{% block titulo %}

{% endblock %}

{% block content %}
  <br />
  <div>
    <a href="{% url 'medicos:nf_incluir' %}" class="btn btn-primary btn-md" role="button">Incluir nota fiscal</a>

    <form method="post" enctype="multipart/form-data">
      {% csrf_token %}
      <input type="file" id="file" name="file" accept=".xml" />
      <input type="submit" value="Importar XML" />
    </form>
  </div>
  <br />
  <div>
    {% render_table table %}
  </div>
{% endblock %}
