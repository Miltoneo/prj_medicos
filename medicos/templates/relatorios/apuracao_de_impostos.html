{% extends 'layouts/base_cenario_apuracao.html' %}
{% block content %}
<div class="container-fluid py-4" style="max-width:100vw;">
  <div class="titulo-relatorio">Apuração de Impostos - Exemplo Estático</div>
  <div class="subtitulo-relatorio">Competência: {{ ano }} &nbsp;|&nbsp; Empresa: {{ empresa.nome }}</div>

  <!-- Card PIS -->
  <div class="card shadow-sm border-info mb-4">
    <div class="card-header bg-info bg-opacity-10 border-info">
      <span class="bi bi-percent text-info me-2"></span> Apuração PIS - Janeiro a Dezembro
    </div>
    <div class="card-body p-0">
      <div class="table-responsive">
        <table class="table table-bordered table-striped table-hover mb-0 w-auto" style="min-width:700px;max-width:1100px;">
          <thead>
            <tr>
              <th>Descrição</th>
              {% for competencia in competencias %}
                <th>{{ competencia|slice:":2" }}</th>
              {% endfor %}
            </tr>
          </thead>
          <tbody>
            {% for linha in linhas_pis %}
            <tr>
              <td>{{ linha.descricao }}</td>
              {% for valor in linha.valores %}
                <td>{{ valor|floatformat:2 }}</td>
              {% endfor %}
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Card COFINS -->
  <div class="card shadow-sm border-success mb-4">
    <div class="card-header bg-success bg-opacity-10 border-success">
      <span class="bi bi-percent text-success me-2"></span> Apuração COFINS - Janeiro a Dezembro
    </div>
    <div class="card-body p-0">
      <div class="table-responsive">
        <table class="table table-bordered table-striped table-hover mb-0 w-auto" style="min-width:700px;max-width:1100px;">
          <thead>
            <tr>
              <th>Descrição</th>
              {% for competencia in competencias %}
                <th>{{ competencia|slice:":2" }}</th>
              {% endfor %}
            </tr>
          </thead>
          <tbody>
            {% for linha in linhas_cofins %}
            <tr>
              <td>{{ linha.descricao }}</td>
              {% for valor in linha.valores %}
                <td>{{ valor|floatformat:2 }}</td>
              {% endfor %}
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Card ISSQN -->
  <div class="card shadow-sm border-warning mb-4">
    <div class="card-header bg-warning bg-opacity-10 border-warning">
      <span class="bi bi-percent text-warning me-2"></span> Apuração ISSQN - Janeiro a Dezembro
    </div>
    <div class="card-body p-0">
      <div class="table-responsive">
        <table class="table table-bordered table-striped table-hover mb-0 w-auto" style="min-width:700px;max-width:1100px;">
          <thead>
            <tr>
              <th>Descrição</th>
              {% for competencia in competencias %}
                <th>{{ competencia|slice:":2" }}</th>
              {% endfor %}
            </tr>
          </thead>
          <tbody>
            {% for linha in linhas_issqn %}
            <tr>
              <td>{{ linha.descricao }}</td>
              {% for valor in linha.valores %}
                <td>{{ valor|floatformat:2 }}</td>
              {% endfor %}
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>


  <!-- Card IRPJ Mensal - NOVO -->
  <div class="card shadow-sm border-danger mb-4">
    <div class="card-header bg-danger bg-opacity-10 border-danger">
      <span class="bi bi-calendar3 text-danger me-2"></span> Apuração IRPJ Mensal - Janeiro a Dezembro (Estimativa)
      <small class="text-muted ms-2">Conforme Lei 9.430/1996, Art. 2º</small>
    </div>
    <div class="card-body p-0">
      <div class="table-responsive">
        <table class="table table-bordered table-striped table-hover mb-0 w-auto" style="min-width:700px;max-width:1100px;">
          <thead>
            <tr>
              <th>Descrição</th>
              {% for competencia in competencias %}
                <th>{{ competencia|slice:":2" }}</th>
              {% endfor %}
            </tr>
          </thead>
          <tbody>
            {% for linha in linhas_irpj_mensal %}
            <tr>
              <td>{{ linha.descricao }}</td>
              {% for valor in linha.valores %}
                <td>{{ valor|floatformat:2 }}</td>
              {% endfor %}
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
    <div class="card-footer bg-danger bg-opacity-5 text-muted small">
      <i class="fas fa-info-circle me-1"></i>
      <strong>Nota:</strong> Pagamento mensal por estimativa. A apuração definitiva é trimestral conforme tabela abaixo.
      O limite mensal para adicional é o valor configurado na tabela de alíquotas.
    </div>
  </div>

  <div class="row">
    <!-- Card IRPJ -->
    <div class="col-12 col-md-6">
      <div class="card shadow-sm border-secondary mb-4 h-100">
        <div class="card-header bg-secondary bg-opacity-10 border-secondary">
          <span class="bi bi-percent text-secondary me-2"></span> Apuração IRPJ - Trimestres em linha
        </div>
        <div class="card-body p-0">
          <div class="table-responsive">
            <table class="table table-bordered table-striped table-hover mb-0 w-auto" style="min-width:700px;max-width:1100px;">
              <thead>
                <tr>
                  <th>Descrição</th>
                  {% for trimestre in trimestres %}
                    <th>{{ trimestre }}</th>
                  {% endfor %}
                </tr>
              </thead>
              <tbody>
                {% for linha in linhas_irpj %}
                <tr>
                  <td>{{ linha.descricao }}</td>
                  {% for valor in linha.valores %}
                    <td>{{ valor|floatformat:2 }}</td>
                  {% endfor %}
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
    <!-- Card CSLL -->
    <div class="col-12 col-md-6">
      <div class="card shadow-sm border-primary mb-4 h-100">
        <div class="card-header bg-primary bg-opacity-10 border-primary">
          <span class="bi bi-percent text-primary me-2"></span> Apuração CSLL - Trimestres em linha
        </div>
        <div class="card-body p-0">
          <div class="table-responsive">
            <table class="table table-bordered table-striped table-hover mb-0 w-auto" style="min-width:700px;max-width:1100px;">
              <thead>
                <tr>
                  <th>Descrição</th>
                  {% for trimestre in trimestres %}
                    <th>{{ trimestre }}</th>
                  {% endfor %}
                </tr>
              </thead>
              <tbody>
                {% for linha in linhas_csll %}
                <tr>
                  <td>{{ linha.descricao }}</td>
                  {% for valor in linha.valores %}
                    <td>{{ valor|floatformat:2 }}</td>
                  {% endfor %}
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
