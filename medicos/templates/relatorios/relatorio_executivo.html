{% extends 'base_saas.html' %}
{% load static %}
{% load humanize %}

{% block title %}Relatório Executivo - {{ conta_atual.nome }}{% endblock %}

{% block breadcrumb_items %}
<li class="breadcrumb-item active">Relatório Executivo</li>
{% endblock %}

{% block extra_css %}
<style>
    .executive-header {
        background: #23272b;
        color: #f8f9fa;
        padding: 2rem;
        border-radius: 12px;
        margin-bottom: 2rem;
    }
    
    .metric-executive {
        background: #23272b;
        border-radius: 12px;
        padding: 2rem;
        text-align: center;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        border-left: 4px solid #0d6efd;
        color: #f8f9fa;
        transition: transform 0.2s ease;
    }
    
    .metric-executive h3 {
        font-size: 2.5rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
        color: #0d6efd;
    }
    
    .metric-executive .label {
        color: #b0b3b8;
        font-size: 0.9rem;
        text-transform: uppercase;
    }
</style>
{% endblock %}

{% block sidebar %}{% include 'medicos/sidebar.html' %}{% endblock %}
{% block topbar %}{% include 'layouts/topbar.html' %}{% endblock %}

{% block content %}
  {% block page_content %}
  <!-- Header Executivo -->
  <div class="executive-header">
      <div class="row align-items-center">
          <div class="col-md-8">
              <h1 class="mb-2">Relatório Executivo</h1>
              <p class="mb-0 opacity-75">
                  <i class="fas fa-chart-line me-2"></i>
                  Análise detalhada da performance da conta {{ conta_atual.nome }}
              </p>
          </div>
          <div class="col-md-4 text-md-end">
              <a href="{% url 'medicos:relatorio_executivo_pdf' conta_atual.id %}" class="btn btn-primary">
                  <i class="fas fa-file-pdf me-2"></i>
                  Baixar PDF
              </a>
          </div>
      </div>
  </div>

  <!-- Métricas Executivas -->
  <div class="row">
      <div class="col-lg-3 col-md-6 mb-4">
          <div class="metric-executive">
              <h3>{{ dados.metrica1|default:0|floatformat:2 }}</h3>
              <div class="label">Métrica 1</div>
          </div>
      </div>
      <div class="col-lg-3 col-md-6 mb-4">
          <div class="metric-executive">
              <h3>{{ dados.metrica2|default:0|floatformat:2 }}</h3>
              <div class="label">Métrica 2</div>
          </div>
      </div>
      <div class="col-lg-3 col-md-6 mb-4">
          <div class="metric-executive">
              <h3>{{ dados.metrica3|default:0|floatformat:2 }}</h3>
              <div class="label">Métrica 3</div>
          </div>
      </div>
      <div class="col-lg-3 col-md-6 mb-4">
          <div class="metric-executive">
              <h3>{{ dados.metrica4|default:0|floatformat:2 }}</h3>
              <div class="label">Métrica 4</div>
          </div>
      </div>
  </div>

  <!-- Gráficos e Tabelas -->
  <div class="row">
      <div class="col-12 mb-4">
          <div class="card">
              <div class="card-header">
                  <h5 class="mb-0">Gráfico de Desempenho</h5>
              </div>
              <div class="card-body">
                  <canvas id="graficoDesempenho"></canvas>
              </div>
          </div>
      </div>
      <div class="col-12">
          <div class="card">
              <div class="card-header">
                  <h5 class="mb-0">Tabela de Detalhes</h5>
              </div>
              <div class="card-body">
                  <table class="table table-striped">
                      <thead>
                          <tr>
                              <th>Métrica</th>
                              <th>Valor</th>
                          </tr>
                      </thead>
                      <tbody>
                          <tr>
                              <td>Métrica 1</td>
                              <td>{{ dados.metrica1|default:0|floatformat:2 }}</td>
                          </tr>
                          <tr>
                              <td>Métrica 2</td>
                              <td>{{ dados.metrica2|default:0|floatformat:2 }}</td>
                          </tr>
                          <tr>
                              <td>Métrica 3</td>
                              <td>{{ dados.metrica3|default:0|floatformat:2 }}</td>
                          </tr>
                          <tr>
                              <td>Métrica 4</td>
                              <td>{{ dados.metrica4|default:0|floatformat:2 }}</td>
                          </tr>
                      </tbody>
                  </table>
              </div>
          </div>
      </div>
  </div>
  {% endblock %}
{% endblock %}
